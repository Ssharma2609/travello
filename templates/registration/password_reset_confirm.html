{% extends "base.html" %}
{% load static %}

{% block content %}
<div class="card">
  <h2 class="title">Set a New Password</h2>

  <form method="post">
    {% csrf_token %}

    <!-- Show field & non-field errors (this is critical) -->
    {% if form.errors or form.non_field_errors %}
      <div class="form-errors">
        {{ form.non_field_errors }}
        {% for field in form %}
          {% for error in field.errors %}
            <p class="error">{{ error }}</p>
          {% endfor %}
        {% endfor %}
      </div>
    {% endif %}

    <label>New password:</label>
    {{ form.new_password1 }}

    <ul class="rules">
      <li>Your password can’t be too similar to your other personal information.</li>
      <li>Your password must contain at least 8 characters.</li>
      <li>Your password can’t be a commonly used password.</li>
      <li>Your password can’t be entirely numeric.</li>
    </ul>

    <div class="row">
      <label>Confirm Password:</label>
      {{ form.new_password2 }}
    </div>

    <p class="help-small">Enter the same password as before, for verification.</p>

    <button type="submit" class="btn btn-primary">Update Password</button>
  </form>

  <p class="back"><a href="{% url 'login' %}">Back to Login</a></p>
</div>

<style>
.card{max-width:560px;margin:40px auto;background:#fff;border-radius:12px;padding:26px;box-shadow:0 10px 24px rgba(0,0,0,.08)}
.title{text-align:center;margin:0 0 18px}
form label{font-weight:600;display:block;margin:10px 0 6px}
form input{width:100%;padding:12px;border:1px solid #ddd;border-radius:8px;box-sizing:border-box}
.rules{color:#d00;font-size:.9rem;margin:10px 0 6px}
.help-small{color:#d00;font-size:.9rem;margin:6px 0 14px}
.row{display:block}
.btn{width:100%;padding:12px;border:0;border-radius:8px;cursor:pointer}
.btn-primary{background:#22a046;color:#fff}
.btn-primary:hover{background:#1b863a}
.form-errors .error{color:#d00;margin:6px 0}
.back{text-align:center;margin-top:12px}
</style>
{% endblock %}
